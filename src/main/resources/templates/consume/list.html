<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head th:include="common/common_head.html::commonHeader">
    <title>消费记录</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body class="cbp-spmenu-push">
<div class="main-content">
    <div th:include="common/side_bar.html::sideBar"></div>
    <div id="page-wrapper">
        <div class="main-page">
            <div>
                <ol class="breadcrumb">
                    <li><a th:href="@{/list/recharge}">充值记录</a></li>
                    <li class="active">消费记录</li>
                </ol>
            </div>
            <div class="grids">
                <div class="progressbar-heading grids-heading">
                    <h2>消费记录</h2>
                </div>
                <div class="panel panel-widget">
                    <div class="search-box"  style="margin-left: 0;margin-bottom: 10px;width:100%">
                        <form class="input" th:action="@{/query/consume}" th:method="post" th:object="${consume}">
                            <input class="sb-search-input form-control" placeholder="手机号" id="phone"
                                   name="phone" style="margin-right: 10px;width:200px;float: left"/>
                            <div class="input-group date form_date col-md-3" data-link-field="dtp_input1" style="float: left">
                                <input class="form-control" id="startTime" name="startTime" size="16" type="text" placeholder="开始时间" readonly>
                                <span class="input-group-addon"><span class="glyphicon glyphicon-time"></span></span>
                            </div>
                            <div class="input-group date form_date1 col-md-3" data-link-field="dtp_input1" style="float: left">
                                <input class="form-control" id="endTime" name="endTime" size="16" type="text" placeholder="结束时间" readonly>
                                <span class="input-group-addon"><span class="glyphicon glyphicon-time"></span></span>
                            </div>
                            <button type="submit" class="btn btn-primary" style="margin-left:20px;padding: 0.5em 1em;">查询</button>
                            <a th:href="@{/list/recharge}" class="btn btn-info" style="padding: 0.5em 1em;">重置</a>
                            <script>
                                Date.prototype.Format = function (fmt) {
                                    var o = {
                                        "M+": this.getMonth() + 1, //月份
                                        "d+": this.getDate(), //日
                                        "h+": this.getHours(), //小时
                                        "m+": this.getMinutes(), //分
                                        "s+": this.getSeconds(), //秒
                                        "q+": Math.floor((this.getMonth() + 3) / 3), //季度
                                        "S": this.getMilliseconds() //毫秒
                                    };
                                    if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
                                    for (var k in o)
                                        if (new RegExp("(" + k + ")").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
                                    return fmt;
                                }

                                $('.form_date').datetimepicker({
                                    format: 'yyyy-mm-dd hh:ii:ss',
                                    weekStart: 0,
                                    todayBtn:  1,
                                    autoclose: 1,
                                    todayHighlight: 1,
                                    forceParse: 0,
                                    showMeridian: 1,
                                });
                                $('.form_date1').datetimepicker({
                                    format: 'yyyy-mm-dd hh:mm:ss',
                                    weekStart: 0,
                                    todayBtn:  1,
                                    autoclose: 1,
                                    todayHighlight: 1,
                                    forceParse: 0,
                                    showMeridian: 1,
                                });
                                $('#startTime').val((new Date()).Format("yyyy-MM-dd hh:mm:ss"));
                                $('#endTime').val((new Date()).Format("yyyy-MM-dd hh:mm:ss"));
                            </script>
                        </form>
                    </div>
                    <div class="tables">
                        <table class="table table-bordered">
                            <thead>
                            <tr>
                                <th>#</th>
                                <th>会员姓名</th>
                                <th>手机号</th>
                                <th>消费金额</th>
                                <th>消费时间</th>
                                <th>消费方式</th>
                                <!--<th>订单状态</th>-->
                                <th>编辑</th>
                                <th th:if="${#session.getAttribute('user').deptId == 1}">删除</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="consume : ${consumes}">
                                <th scope="row" th:text="${consume.id}">1</th>
                                <td th:text="${consume.userName}">neo</td>
                                <td th:text="${consume.phone}">Otto</td>
                                <td th:text="${consume.money}">6</td>
                                <td th:text="${consume.time}">6</td>
                                <td th:text="${consume.payName}">6</td>
                                <!--<td th:text="${consume.consumeStatus}">6</td>-->
                                <td><a th:href="@{/toEdit/consume(id=${consume.id})}">edit</a></td>
                                <td th:if="${#session.getAttribute('user').deptId == 1}"><a th:href="@{/delete/consume(id=${consume.id})}">delete</a></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <a type="button" th:href="@{/toAdd/consume}" class="btn btn_5 btn-lg btn-success warning_1">添加消费记录</a>
            </div>
        </div>
    </div>
    <div class="dev-page">
    </div>
</div>
<div th:include="common/onload_js.html::onloadJS"></div>
</body>
</html>